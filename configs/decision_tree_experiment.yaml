---
# This is an example configuration for a single experiment.
name: "Selection algorithms Comparison with DT"
author: "Heidi Neuh√§user"
version: 0.1

# time limit for measurement (s) (expandable)
max_time_t: null
repetitions: 5
# path to write results as pickled Pandas DF
result_path: "out/URS_DT_selection.pkl"
result_path_add_timestamp: False

pmodels:
    #- name: ExampleModel
    - name: NFVSDN17ExperimentMeasurements
      n_model_instances: 10
      topologies: ["nx-sc-sq", "sc-sq-nx", "sq-nx-sc"]
      raw_data_path: "analysis/data/peuster_karl_ieeenfvsdn17_3vnf_sfc_profile.pkl"
    #- name: RandomSyntheticModel
    #  n_model_instances: 10
    #  a1_range: [0.1, 2.0]
    #  func_set: [1, 2, 3, 4, 5, 6, 7, 8]
    #  topologies: ["l3"]

selector:
    - name: UniformRandomSelector
      # max. no. of samples to be selected (expandable)
      max_samples: {min: 4, max: 36, step: 4}
    #- name: UniformGridSelector
    #  # max. no. of samples to be selected (expandable)
    #  max_samples: {min: 2, max: 42, step: 4}
    #- name: UniformGridSelectorRandomOffset
      # max. no. of samples to be selected (expandable)
    #  max_samples: {min: 2, max: 42, step: 4}
    #- name: UniformGridSelectorIncrementalOffset
      # max. no. of samples to be selected (expandable)
    #  max_samples: {min: 2, max: 42, step: 4}
    #- name: HyperGridSelector
    #  max_samples: {min: 2, max: 42, step: 4}
    #- name: PanicGreedyAdaptiveSelector
    #  # max. no. of samples to be selected (expandable)
    #  max_samples: {min: 2, max: 42, step: 4}
    #  max_border_points: 5
    - name: DecisionTreeSelector
      # max. no. of samples to be selected (expandable)
      max_samples: {min: 4, max: 36, step: 4}
      initial_samples: 4
      max_depth: 100
      regression: default
      min_samples_split: 4
      weight_size: 0.4
    - name: WeightedVnfSelector
      max_samples: {min: 4, max: 36, step: 4}
      border_point_mode: 2  # 0 = max, 1 = min, 2 = both
      border_point_mode_panic: False
      sampling_mode_maxmin: 2 # 0 = max, 1 = min, 2 = median
      p_samples_per_vnf: 10  # number of samples before switching to VNF with smaller weight


predictor:
    - name: PolynomialRegressionPredictor
      degree: [3]  # poly. degree (expandable)
    - name: SVRPredictorRbfKernel
      epsilon: [0.1]  # epsilon (expandable)
      scale_x: True
    - name: SVRPredictorLinearKernel
      epsilon: [0.1]  # epsilon (expandable)
      scale_x: True
    - name: SVRPredictorPolyKernel
      epsilon: [0.1]  # epsilon (expandable)
      scale_x: True

error_metrics:
    - name: MSE
    - name: RMSD
    - name: NRMSDMean
    - name: NRMSDRange
    #- name: MAE
    #- name: R2
    - name: EVS
    - name: MEDAE

plot:
    - name: Boxplot
      path: plots
      title: Error
      x: k_samples
      y: error_value
      n_plots:
        # list of columns that distinguish plots
        - selector
        - predictor
        - degree
        - epsilon
        - error
    - name: Lineplot
      path: plots
      title: Selector Error Comparison
      x: k_samples
      y: error_value
      # column that distinguishes lines in plot
      hue: selector_conf
      error_bars: 95  # ="sd" or =95 (for ci)
      n_plots:
        # list of columns that distinguish plots
        - predictor
        - degree
        - epsilon
        - error
    - name: Lineplot
      # needs fixed argument values for predictors!
      path: plots
      title: Predictor Error Comparison
      x: k_samples
      y: error_value
      # column that distinguishes lines in plot
      hue: predictor_conf
      error_bars: 95  # ="sd" or =95 (for ci)
      n_plots:
        # list of columns that distinguish plots
        - selector
        - error
